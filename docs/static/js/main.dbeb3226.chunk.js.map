{"version":3,"sources":["components/Result.js","services/fetch.js","components/App.js","index.js"],"names":["Result","props","className","result","detailsAreHidden","details","fetchCIMA","query","fetch","then","response","json","App","fetchDataBase","a","async","getInfo","interactions","onSubmitHandler","event","preventDefault","state","query1","query2","drug1","drug2","bind","getInputValue","showDetails","item","this","ingredient","selectedElement","console","log","ingredients","affected_ingredient","elem","name","setState","severity","description","target","value","resultados","vtm","nombre","id","data","prevState","Fragment","onSubmit","type","onChange","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dbeb3226.chunk.js","sourcesContent":["import React from 'react';\n\nconst Result = props => {\n    return (\n        <section className='result-container'>\n            <p className='result-container__txt'>Riesgo: {props.result}</p>\n            <button className='result-container__btn'>Más información</button>\n            <p className={`result-container__details ${props.detailsAreHidden ? 'hidden': null}`}>{props.details}</p>\n        </section>\n    )\n}\nexport default Result;\n","const CIMA = 'https://cima.aemps.es/cima/rest/medicamentos?nombre=';\n\nconst fetchCIMA = query => fetch(CIMA+query).then(response => response.json());\n\n\nexport { fetchCIMA };","import React from 'react';\nimport '../stylesheets/App.scss';\nimport Result from './Result'\nimport {fetchCIMA} from '../services/fetch'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      query1: '',\n      query2: '',\n      drug1: '',\n      drug2: '',\n      result: '',\n      details: '',\n      detailsAreHidden: true\n    }\n    this.onSubmitHandler = this.onSubmitHandler.bind(this);\n    this.getInputValue = this.getInputValue.bind(this);\n    this.fetchDataBase = this.fetchDataBase.bind(this);\n    this.showDetails = this.showDetails.bind(this);\n  }\n\n  fetchDataBase = async() => {\n    const response = await fetch('./data/interactions.json')\n    const json = await response.json();\n    this.getInfo(json.interactions)\n  } \n  getInfo(interactions){\n    for (const item of interactions){\n      if (this.state.drug1===item.ingredient){\n        const selectedElement = item\n        console.log(selectedElement)\n        const ingredients = selectedElement.affected_ingredient\n        for (const elem of ingredients){\n          if (this.state.drug2===elem.name){\n            this.setState({\n              result: elem.severity,\n              details: elem.description\n            })\n            break;\n          } else {\n            this.setState({\n              result: 'no hay info',\n              details: 'no hay info'\n            })\n          }\n        }\n      }\n    }\n  }\n  onSubmitHandler = event => {\n    event.preventDefault();\n    this.fetchDataBase()\n\n  }\n  async getInputValue (event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    this.setState({\n      [name]: value\n    })\n    const drug1 = await fetchCIMA(this.state.query1)\n    const drug2 = await fetchCIMA(this.state.query2)\n    \n    if (!drug1.resultados[0] || !drug2.resultados[0]){\n      this.setState({\n        drug1: '',\n        drug2: '',\n        result: '',\n        details: ''\n      })\n    } else {\n      this.setState({\n        drug1: drug1.resultados[0].vtm.nombre,\n        drug2: drug2.resultados[0].vtm.nombre\n      })\n    }\n      \n  }\n  fetchCIMA(id){\n    fetchCIMA(id)\n    .then(data => {\n      return data.resultados[0].vtm.nombre\n    })\n  }\n  \n  showDetails () {\n    this.setState(prevState => {\n      return {\n        detailsAreHidden: !prevState.detailsAreHidden\n      }\n    })\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <header></header>\n        <main className='main'>\n          <form className='form' onSubmit={this.onSubmitHandler}>\n            <label className='label'>Introduzca los nombres de los medicamentos</label>\n            <input\n            className='input'\n            type='text'\n            name='query1'\n            value={this.state.query1}\n            onChange={this.getInputValue}\n            />\n            <input\n            className='input'\n            type='text'\n            name='query2'\n            value={this.state.query2}\n            onChange={this.getInputValue}\n            />\n            <button\n            className='btn'\n            type='submit'>\n              Buscar\n            </button>\n          </form>\n          {this.state.result ? \n          <Result result={this.state.result}\n          drug1={this.state.drug1}\n          drug2={this.state.drug2}\n          details={this.state.details}\n          showDetails={this.showDetails}\n          detailsAreHidden={this.state.detailsAreHidden}\n          /> : null}\n        </main>\n        <footer></footer>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './stylesheets/index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}