(this["webpackJsonpexercise-1-mariad"]=this["webpackJsonpexercise-1-mariad"]||[]).push([[0],{11:function(e,t,n){e.exports=n(19)},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(4),u=n.n(r),i=n(2),l=n.n(i),o=n(5),c=n(6),g=n(7),m=n(9),d=n(8),h=n(1),f=n(10),p=(n(17),function(e){return s.a.createElement("section",{className:"result-container"},s.a.createElement("span",{className:"result-container__message"}," interacci\xf3n entre componentes ",s.a.createElement("b",null,e.drug1)," y ",s.a.createElement("b",null,e.drug2)),s.a.createElement("p",{className:"result-container__txt"},"Riesgo: ",e.result),s.a.createElement("button",{className:"result-container__btn",onClick:function(){e.showDetails()}},"M\xe1s informaci\xf3n"),s.a.createElement("p",{className:"result-container__details ".concat(e.detailsAreHidden?"hidden":null)},e.details))}),b=function(e){var t=function(t){console.log(t.target.id),e.selectAnOption(t.target.dataset.name,t.target.id)};return s.a.createElement("ul",{className:e.suggestionsDrug?"autocomplete":"hidden"},!e.suggestionsDrug||e.suggestionsDrug.map((function(n,a){return s.a.createElement("li",{key:a,onClick:t,"data-name":e.name,id:n},n)})))},y=function(e){return fetch("https://cima.aemps.es/cima/rest/medicamentos?nombre="+e).then((function(e){return e.json()}))},v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault(),n.getComponent()},n.state={query1:"",query2:"",drug1:"",drug2:"",result:"",suggestionsDrug1:[],suggestionsDrug2:[],details:"",detailsAreHidden:!0},n.getSuggestions=n.getSuggestions.bind(Object(h.a)(n)),n.getInputValue=n.getInputValue.bind(Object(h.a)(n)),n.fetchCIMA=n.debounce(n.fetchCIMA,500),n.selectAnOption=n.selectAnOption.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n.getComponent=n.getComponent.bind(Object(h.a)(n)),n.callServer=n.callServer.bind(Object(h.a)(n)),n.getResults=n.getResults.bind(Object(h.a)(n)),n.showDetails=n.showDetails.bind(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(g.a)(t,[{key:"getInputValue",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(o.a)({},t,n)),this.fetchCIMA(t,n)}},{key:"fetchCIMA",value:function(e,t){var n=this;y(t).then((function(t){return n.getSuggestions(e,t.resultados)}))}},{key:"debounce",value:function(e,t){var n;return function(){n&&clearTimeout(n);var a=this,s=arguments;n=setTimeout((function(){e.apply(a,s)}),t)}}},{key:"getSuggestions",value:function(e,t){for(var n=[],a=0;a<t.length;a++)n.push(t[a].nombre);"query1"===e?this.setState({suggestionsDrug1:n}):this.setState({suggestionsDrug2:n})}},{key:"selectAnOption",value:function(e,t){"query1"===e?this.setState({query1:t,suggestionsDrug1:[]}):this.setState({query2:t,suggestionsDrug2:[]})}},{key:"getComponent",value:function(){var e,t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(y(this.state.query1).then((function(e){return e.resultados[0].vtm.nombre})));case 2:return e=n.sent,n.next=5,l.a.awrap(y(this.state.query2).then((function(e){return e.resultados[0].vtm.nombre})));case 5:t=n.sent,this.setState({drug1:e,drug2:t}),this.callServer();case 8:case"end":return n.stop()}}),null,this)}},{key:"callServer",value:function(){var e=this;fetch("./data/interactions.json").then((function(e){return e.json()})).then((function(t){return e.getResults(t.interactions)}))}},{key:"getResults",value:function(e){var t=!0,n=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var u=s.value;if(u.ingredient===this.state.drug1){var i=u.affected_ingredient,l=!0,o=!1,c=void 0;try{for(var g,m=i[Symbol.iterator]();!(l=(g=m.next()).done);l=!0){var d=g.value;if(d.name===this.state.drug2){this.setState({result:d.severity,details:d.description});break}this.setState({result:"no hay info",details:"no hay info"})}}catch(h){o=!0,c=h}finally{try{l||null==m.return||m.return()}finally{if(o)throw c}}}}}catch(h){n=!0,a=h}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}}},{key:"showDetails",value:function(){this.setState((function(e){return{detailsAreHidden:!e.detailsAreHidden}}))}},{key:"render",value:function(){var e=this.state,t=e.suggestionsDrug1,n=e.suggestionsDrug2,a=e.result,r=e.details,u=e.detailsAreHidden;return console.log(this.state.query1),console.log(this.state.query2),console.log(this.state.drug1),s.a.createElement(s.a.Fragment,null,s.a.createElement("header",null),s.a.createElement("main",{className:"main"},s.a.createElement("form",{className:"form",onSubmit:this.onSubmit},s.a.createElement("label",{className:"label"},"Introduzca los nombres de los medicamentos"),s.a.createElement("input",{className:"input",type:"text",name:"query1",value:this.state.query1,onChange:this.getInputValue,autoComplete:"off"}),t.length>0?s.a.createElement(b,{suggestionsDrug:t,name:"query1",selectAnOption:this.selectAnOption}):null,s.a.createElement("input",{className:"input",type:"text",name:"query2",value:this.state.query2,onChange:this.getInputValue,autoComplete:"off"}),n.length>0?s.a.createElement(b,{suggestionsDrug:n,name:"query2",selectAnOption:this.selectAnOption}):null,s.a.createElement("button",{className:"btn",type:"submit"},"Buscar")),a?s.a.createElement(p,{result:a,drug1:this.state.drug1,drug2:this.state.drug2,details:r,showDetails:this.showDetails,detailsAreHidden:u}):null),s.a.createElement("footer",null))}}]),t}(s.a.Component);n(18);u.a.render(s.a.createElement(v,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.09646f22.chunk.js.map